from openai import OpenAI

from mocogpt import gpt_server


class TestMocoGPTChat:
    embeddings = [0.002253932, -0.009333183, 0.01574578, -0.007790351, -0.004711035, 0.014844206, -0.009739526,
                  -0.03822161, -0.0069014765, -0.028723348, 0.02523134, 0.01814574, -0.003650735, -0.025498003,
                  0.0004960238, -0.016317198, 0.028418591, 0.0053268983, 0.009618893, -0.01644418, -0.015339436,
                  0.0042634234, 0.0070284586, -0.007079251, -0.003920572, 0.01850129, 0.008704622, -0.02275519,
                  0.011447435, 0.02382184, 0.015529909, -0.0035269274, -0.034920074, -0.00414914, -0.026107516,
                  -0.021523464, -0.0057459394, 0.011758541, 0.008317326, 0.0040951725, 0.019174295, -0.014437864,
                  0.00899668, 0.006301486, -0.04571355, 0.017828286, -0.005501499, -0.0007995903, -0.022005996,
                  -0.0038126372, 0.020990139, -0.017460037, -0.0117331445, -0.022602811, 0.016431483, 0.017193375,
                  -0.0085014505, 0.0015864824, 0.025078962, -0.024964679, 0.0077522565, 0.0058221286, -0.02218377,
                  0.0030475701, -0.0061840275, -0.025383718, -0.0080443155, 0.001172997, 0.000031745523,
                  0.0046538934, 0.020672685, 0.013510894, 0.0046602427, -0.015936252, 0.016545765, -0.008939539,
                  -0.0075363866, 0.013625178, -0.0070411568, 0.0053713424, 0.0098728575, -0.04586593,
                  0.0030285227, 0.023999615, 0.022945663, 0.0070856004, -0.023618668, 0.009929999, -0.006571323,
                  -0.03324391, -0.0025904346, 0.0198473, 0.0017840983, 0.0010872841, -0.022704396, 0.0050094435,
                  0.015377531, 0.03161854, -0.005415786, -0.016063234, -0.0050951564, 0.019859998, -0.0094157215,
                  -0.0067237015, -0.031212198, -0.0094474675, -0.015212454, -0.028824933, 0.020990139,
                  -0.01829812, -0.0029682063, 0.012704558, 0.005203091, -0.049497616, -0.04304693, -0.00038412082,
                  0.021459972, -0.016812429, 0.0065459264, -0.041421555, 0.00096585747, 0.03352327, 0.0131045515,
                  -0.010482371, -0.0004876906, 0.018425101, 0.00008020704, -0.013091853, 0.011828382,
                  0.0058602234, 0.0071109966, 0.008539545, 0.018425101, -0.00070673466, -0.019085407, 0.021891711,
                  -0.029739205, -0.0042792964, 0.0014475958, -0.005101505, 0.015034679, 0.021294896, -0.018818745,
                  0.01106014, -0.007434801, 0.022526622, 0.019237787, 0.014983886, -0.003571371, 0.006288788,
                  0.025624985, -0.027758284, 0.03664703, -0.0044570714, 0.013815651, 0.007987173, -0.0056316555,
                  0.010317295, -0.005818954, -0.008691924, 0.010691891, -0.000049552775, 0.032177262,
                  -0.023771046, -0.0024809125, 0.030272529, 0.029612223, 0.01650767, 0.0021301245, 0.0009452229,
                  -0.011574417, 0.018564781, -0.0075871795, 0.0075236885, -0.0011047442, 0.0045459587, 0.00992365,
                  -0.007644322, -0.006291962, -0.005799907, -0.028266212, 0.0043491363, 0.029231276, 0.024939282,
                  -0.01565689, -0.018196533, 0.0076125762, 0.008641131, -0.011688701, -0.006352279, 0.0020523479,
                  0.036900993, -0.002444405, -0.020825062, -0.6895635, -0.019580638, 0.0036189894, 0.006691956,
                  0.02829161, 0.023402799, 0.0072125825, 0.010520466, 0.009606195, -0.009587147, -0.021282198,
                  0.000058133985, 0.019720318, 0.0021952027, -0.009510959, -0.002069808, -0.00033729617,
                  0.0066475123, -0.04119299, 0.011225216, -0.013422007, 0.02778368, -0.011377595, 0.0001462278,
                  0.015402927, -0.0005051506, 0.014412466, -0.008552244, -0.018907633, -0.017688604, -0.009377627,
                  0.02459643, 0.012837889, -0.008831604, 0.03502166, -0.0051491237, -0.024228182, 0.024139294,
                  -0.0037015278, 0.030983629, -0.015009282, -0.023263117, 0.030094754, 0.0068252874, 0.010095076,
                  0.0114728315, 0.030323323, 0.01758702, 0.0021015536, -0.006730051, 0.009733177, 0.016634652,
                  0.0035904185, 0.027910663, 0.004069776, 0.0030840775, 0.029789997, -0.016774334, 0.00217933,
                  0.02317423, 0.011879174, 0.01424739, -0.019656828, -0.02948524, -0.0015912442, 0.018272722,
                  -0.0027602732, 0.019161597, 0.027580509, -0.008457007, 0.012368055, 0.0028317005, -0.005225313,
                  0.0064729117, 0.009396674, 0.02253932, 0.023517082, 0.0009928412, 0.01899652, -0.0029301117,
                  -0.0069205235, -0.0101331705, -0.007930031, -0.0072506773, 0.020571098, 0.010825223,
                  -0.029891582, -0.0038539064, 0.0026999565, -0.01885684, 0.029891582, 0.024634525, -0.0044316747,
                  0.026412275, 0.017561622, 0.0411168, -0.020190151, 0.0147045255, 0.021510765, -0.029942377,
                  -0.0014904522, 0.00340312, 0.034132786, 0.03608831, 0.028037645, 0.018387007, 0.0031697904,
                  0.009326834, 0.020685382, -0.012501386, 0.017066393, 0.011587115, -0.007631623, 0.013193439,
                  -0.0073268665, -0.022577414, 0.0059300633, 0.025777364, -0.019034615, -0.018971123,
                  -0.013282326, -0.0026491638, 0.022437735, -0.00794273, -0.00076903525, 0.028190022, 0.01389184,
                  -0.019961584, -0.021040931, -0.002955508, 0.013510894, 0.015974347, 0.011999807, -0.016875919,
                  0.0048602396, -0.012933126, 0.025929742, -0.030323323, 0.017561622, -0.022437735, -0.01885684,
                  0.0019396513, -0.006082442, 0.0020952043, -0.0015618796, -0.011231566, -0.005374517,
                  -0.011383944, -0.021523464, 0.0051205526, 0.005590386, -0.00022420274, -0.012622019,
                  0.003396771, 0.02459643, -0.0019698096, 0.0013031537, -0.005485626, -0.024748808, -0.03055189,
                  -0.01594895, 0.016672747, -0.013345817, -0.008628433, 0.009441118, -0.0074728956, 0.0070729023,
                  -0.005663401, -0.012126789, -0.023783745, 0.028799538, -0.015923554, -0.003339629, 0.0053459457,
                  -0.016812429, 0.0014928331, -0.021891711, -0.019479051, -0.0063332315, 0.016469577, 0.008755415,
                  0.0040412047, -0.013879142, -0.012914078, 0.009530006, 0.005742765, 0.0014372785, 0.025256736,
                  -0.017815586, 0.015377531, 0.00209203, -0.010971252, 0.0073903576, 0.0014531512, 0.015987044,
                  0.013307722, -0.0026571, 0.0020650462, 0.014133106, -0.0022682175, -0.004196758, -0.0065840213,
                  0.003139632, -0.0047967485, 0.013269628, -0.017523527, -0.011091885, -0.029612223, 0.0038507318,
                  0.007504641, 0.016063234, -0.013739462, -0.017269563, -0.0038126372, 0.02140918, 0.016990203,
                  0.01921239, 0.006869731, -0.013942633, -0.009199852, -0.0023396448, -0.02091395, -0.0052316617,
                  -0.0015706096, 0.0064252936, 0.0030602682, 0.0030570938, -0.00730147, 0.0012237899,
                  -0.0021428226, -0.0020158407, 0.018602876, 0.0007110997, 0.015085472, 0.0069649676,
                  0.0013475973, 0.016342595, -0.008780811, 0.016748937, -0.0005257852, -0.0077141616, 0.016761634,
                  -0.0008011776, -0.027910663, 0.0108506195, 5.3632573E-7, -0.006031649, -0.0112442635,
                  -0.027453527, 0.008901444, 0.012926776, 0.016812429, -0.017612414, 0.014653733, -0.0040221578,
                  0.0080125695, -0.0018698112, -0.018793348, 0.034056596, 0.021040931, 0.01644418, 0.022272658,
                  0.015517211, -0.0010134758, 0.0044761184, 0.00059364125, -0.0076887654, -0.026209103,
                  0.009764923, -0.0067617963, 0.014793413, -0.025917044, -0.0023364704, -0.0066602104,
                  0.0066983053, -0.0012110916, -0.01864097, 0.0022459957, -0.017904473, 0.0048062718,
                  0.0031618539, -0.021790126, 0.029891582, 0.011866476, -0.0027618604, -0.01098395, -0.01737115,
                  0.0074094045, -0.012469641, 0.003225345, 0.0072506773, 0.01438707, 0.0011595052, -0.009587147,
                  0.01410771, 0.0006202281, 0.046119895, -0.02077427, 0.031567745, -0.005145949, 0.0065840213,
                  -0.025193246, -0.028113835, -0.023517082, 0.026259895, -0.013091853, -0.022285355,
                  -0.00055792753, 0.023364704, -0.007745907, 0.0065332283, -0.0059649837, -0.012507736,
                  -0.0021269498, 0.023834538, -0.0033015343, -0.029409051, 0.0019079058, 0.007720511,
                  -0.0008737955, -0.030450305, -0.016977506, -0.008799858, -0.013422007, 0.07811938, -0.004914207,
                  0.015187058, 0.008387167, 0.036621634, 0.000517452, -0.03890731, -0.0047078608, -0.0054602297,
                  -0.01212044, -0.0067110034, 0.009517307, 0.024939282, 0.007206233, 0.026336085, -0.0042570746,
                  -0.0059427614, -0.024507543, 0.019275881, -0.023872633, -0.008234789, 0.016647352, 0.015936252,
                  0.027097978, -0.015187058, 0.0044538965, 0.025599588, 0.02615831, -0.0011285533, -0.023504384,
                  0.0016491798, -0.0012182344, -0.0048824614, -0.0022094883, -0.015568004, 0.0048665884,
                  0.0005083252, -0.012241073, 0.0048824614, -0.0062697404, 0.040431097, -0.0085331965,
                  0.0050348397, -0.01707909, 0.0047523044, -0.0016571162, -0.027605906, 0.05081823, -0.030374115,
                  -0.0028904297, 0.015466418, 0.027123373, 0.002236472, -0.010545862, -0.004311042, 0.011187122,
                  -0.0067110034, -0.024228182, -0.013968029, 0.016355293, -0.014717224, -0.03768828, -0.005501499,
                  -0.0006134822, -0.025993234, -0.020380626, -0.012660114, -0.012507736, -0.0029650317,
                  -0.0029586826, -0.012342659, 0.0037967644, -0.012844238, -0.0070411568, 0.017383847,
                  -0.0024269451, -0.0034793091, -0.009803017, -0.00091109646, 0.009955396, 0.00066229096,
                  -0.008228439, 0.0014301358, 0.0035364511, -0.029104294, 0.02275519, 0.026539257, 0.011110933,
                  0.0053776912, 0.0042538997, -0.002219012, -0.002598371, 0.005238011, -0.015428323, -0.005501499,
                  -0.021790126, -0.016266406, 0.025142454, -0.008526847, -0.0032364558, -0.008082409,
                  0.0018983822, -0.009244296, 0.00045237367, 0.043631043, -0.008412563, -0.011339501,
                  -0.025040867, 0.0041078706, -0.011034743, 0.020533003, 0.0147680165, -0.018971123, 0.007415754,
                  -0.012012505, 0.030374115, 0.012152186, 0.032278847, 0.0035777204, -0.009091917, -0.0074728956,
                  -0.00652053, 0.02502817, -0.012374404, 0.009396674, -0.0009761748, 0.012425197, -0.013295025,
                  -0.0015912442, -0.012768049, -0.0037174006, 0.0071744877, -0.010507768, 0.009968094,
                  -0.0043427874, -0.0025777363, -0.0041713617, 0.010812525, -0.0255107, -0.02417739, -0.04012634,
                  -0.015199755, 0.012825191, -0.013244231, -0.028520176, -0.02360597, -0.0048792865, -0.008076061,
                  -0.016152121, 0.051351555, 0.011783938, 0.009320485, -0.031720124, 0.03949143, 0.004787225,
                  -0.014133106, -0.014907697, -0.006526879, 0.004523737, 0.027199563, 0.021675842, -0.00023253594,
                  0.019580638, 0.0037808917, -0.00008273676, -0.0066030687, -0.010780779, -0.0045459587,
                  -0.030424908, 0.029536033, 0.02651386, 0.014806111, 0.009803017, 0.009295089, -0.02083776,
                  0.0036126403, 0.004701512, -0.008787161, -0.009650638, -0.013841047, 0.017561622, -0.027428132,
                  0.0049078576, 0.0071490915, 0.032786775, -0.0075617833, 0.022577414, 0.0062760897, 0.016063234,
                  -0.00034463732, 0.028672555, -0.0144759575, 0.0026459892, -0.010183963, -0.017206073,
                  0.010393484, -0.0051427744, -0.0153902285, -0.018399704, -0.00032439956, 0.027707491,
                  0.0011198233, 0.0050316653, -0.013460102, -0.007885587, 0.0050284904, 0.013472799, -0.014412466,
                  -0.004765003, -0.026107516, -0.018704461, -0.019580638, -0.012602972, -0.029891582,
                  -0.009898254, -0.0034126437, -0.04116759, 0.012977569, -0.009491911, -0.03814542, -0.0007662575,
                  -0.0038761282, -0.014221993, -0.0038507318, 0.016710842, -0.0007273693, -0.017333055,
                  -0.015542608, 0.029383656, -0.00428882, -0.009726828, -0.00010733955, 0.01148553, 0.025002772,
                  -0.021942504, -0.01884414, 0.021434575, 0.00999349, -0.022932965, 0.013637876, -0.0046697664,
                  0.02956143, -0.012774398, 0.018323515, 0.0006499896, 0.012920427, -0.020863157, 0.0035174037,
                  0.0037459715, 0.006831636, -0.02991698, -0.0020888553, -0.024278974, 0.026107516, -0.009796668,
                  -0.010196662, 0.008215741, -0.010177614, -0.013129948, 0.021752032, -0.010920459, 0.008374468,
                  -0.008482403, 0.01644418, -0.003628513, -0.009682384, 0.013422007, -0.007841144, 0.01806955,
                  0.019504448, -0.022463132, -0.023415497, 0.003720575, 0.009383976, 0.027402734, -0.0071744877,
                  -0.015174359, -0.016888617, -0.004549133, -0.013663272, -0.0056030843, 0.010406182, 0.004977698,
                  0.008164948, -0.00062737084, -0.032482017, -0.028113835, 0.0048030973, 0.0061776787,
                  -0.015898157, -0.021790126, -0.020901252, 0.0015745779, -0.001526166, 0.02465992, -0.002023777,
                  -0.012374404, 0.015301341, -0.012774398, 0.009091917, -0.0103299925, 0.019186994, -0.025434513,
                  0.008418912, 0.0033555017, 0.013053758, 0.022463132, -0.009034775, -0.023199627, -0.01636799,
                  0.0011341088, -0.004276122, 0.018171137, -0.0057364157, 0.026031328, 0.0052919784, 0.0067617963,
                  -0.0063395808, -0.018209232, 0.019593336, -0.017828286, -0.001212679, 0.027250355, -0.01588546,
                  -0.020571098, 0.03977079, 0.008603036, -0.002247583, -0.029510638, 0.009212551, -0.02162505,
                  0.035707362, -0.014260088, -0.014628337, -0.023263117, 0.011460133, -0.01658386, 0.020266341,
                  0.0064316425, -0.013434704, 0.016482275, 0.013244231, 0.019821903, -0.0014055329, 0.016114026,
                  0.004777701, -0.013828349, 0.007828445, -0.03598672, -0.02707258, -0.009980792, 0.009771272,
                  -0.004488817, -0.009809366, -0.014348975, 0.009822064, -0.04309772, 0.024558336, -0.010710939,
                  0.0048538903, 0.011104584, 0.021498067, -0.023453591, 0.0067617963, -0.031034421, 0.0059300633,
                  -0.005196742, -0.013879142, -0.00645069, 0.00027658287, 0.009231598, -0.009720479, -0.042335827,
                  -0.011085536, 0.0086982725, 0.0025047217, 0.011968061, -0.006730051, -0.014145805, -0.007104648,
                  0.0018015583, 0.0144759575, 0.033142325, 0.0052443603, -0.0017523528, -0.012844238,
                  -0.015301341, 0.01828542, -0.005803081, -0.04815161, -0.017688604, 0.009212551, -0.010742685,
                  0.00005818359, -0.01574578, -0.02813923, 0.017663209, -0.017193375, -0.0026158309, -0.022463132,
                  -0.01729496, 0.01523785, 0.007993522, -0.019110804, 0.007809398, -0.00007539561, -0.019580638,
                  0.016456878, 0.007079251, 0.00012251787, -0.009256994, -0.015860062, 0.005041189, -0.005847525,
                  -0.020875854, 0.0034062944, 0.0038158116, -0.0017317182, 0.004536435, 0.012666463, -0.014894999,
                  0.012425197, 0.0024126596, -0.0038761282, 0.00048530966, -0.008920492, 0.015923554,
                  -0.017396545, -0.016774334, -0.005123727, -0.022171073, -0.02062189, 0.018094948, 0.009307787,
                  -0.0077268598, 0.025929742, 0.21922188, 0.012006156, -0.0050570616, 0.037408922, -0.00051229337,
                  0.03131378, 0.0020206023, 0.002501547, -0.017193375, 0.0131680425, -0.011352198, -0.00652053,
                  0.001534896, -0.00297773, 0.0062760897, -0.0049364287, -0.025104359, -0.023834538,
                  0.00030019358, -0.035326418, 0.0107553825, -0.016469577, 0.00082776445, -0.017307658,
                  0.03771368, 0.0021142517, -0.04408818, 0.006577672, 0.013968029, 0.024380561, -0.01907271,
                  -0.008564942, 0.005818954, 0.0016039425, -0.0144759575, 0.013002966, 0.006926873, 0.0039173975,
                  0.005726892, -0.0038253353, 0.0098728575, -0.012958522, 0.017256865, -0.016456878, 0.017244168,
                  0.024507543, -0.018704461, -0.027250355, 0.0031809013, 0.036469255, -0.01523785, -0.018742556,
                  0.006571323, 0.010234756, 0.0055046733, 0.009130012, 0.025967836, -0.020177454, -0.019834602,
                  -0.0060094274, 0.010583957, 0.009580798, -0.016355293, 0.00094363565, -0.030043961, 0.00977762,
                  -0.014793413, 0.014336278, -0.0031713776, -0.015923554, -0.0013785493, -0.024990074,
                  0.0002107109, 0.022221865, -0.009085569, -0.010044283, 0.025002772, -0.012793445, 0.019529846,
                  0.03494547, -0.026742427, 0.00010317295, -0.0068252874, -0.011231566, -0.016914014,
                  -0.030120151, 0.0040443796, 0.014539449, -0.01893303, -0.020596495, 0.011383944, -0.0127617,
                  -0.000104363404, -0.001451564, 0.017688604, 0.005628481, -0.0064824354, 0.010177614,
                  0.0032507414, -0.011352198, -0.0107553825, -0.05500864, -0.009358579, -0.004812621, -0.02849478,
                  -0.0031872503, 0.0028443988, 0.03672322, 0.0032459795, -0.005590386, -0.0026729729,
                  -0.00042499317, 0.017904473, -0.0014793413, 0.002444405, -0.0026713856, -0.016837824,
                  0.0035967676, 0.030247133, -0.024012312, 0.01878065, -0.019199692, -0.0027967806, 0.03347248,
                  -0.020533003, -0.012977569, -0.011542671, 0.012031552, 0.025574192, -0.01191092, 0.038475573,
                  -0.0036316877, -0.00786654, 0.019885395, -0.033650253, -0.018729858, 0.009631591, 0.018234627,
                  -0.026691634, -0.0121585345, 0.024926584, 0.0008547482, -0.0010571259, 0.0063681514,
                  -0.004949127, -0.035529587, 0.012323611, 0.00744115, -0.029891582, -0.01829812, -0.030805854,
                  -0.014615638, -0.01714258, -0.017256865, 0.024926584, -0.020253643, -0.044621505, -0.0056951465,
                  -0.013777556, -0.0009285565, -0.0029729682, -0.00652053, 0.052976925, -0.01162521, 0.008076061,
                  0.005615783, -0.16162279, 0.0092188995, -0.024545638, -0.016393388, 0.015821967, 0.00060752995,
                  0.023161532, -0.007282423, -0.018094948, 0.018894935, 0.010215709, 0.010368087, -0.03301534,
                  0.0023777396, 0.019021917, 0.01644418, 0.0001269821, -0.014285484, 0.023123438, 0.019618733,
                  0.0382724, 0.0026094818, 0.0010714113, -0.007549085, 0.0026951947, 0.030450305, -0.025472606,
                  0.0038062881, -0.011022045, 0.0019079058, 0.0058602234, -0.0028983662, 0.0255107, -0.008444308,
                  0.010323644, 0.005330073, 0.00013055345, -0.006641163, 0.017701304, 0.035275623, 0.013218835,
                  0.027961455, -0.0013539465, 0.01495849, -0.00977762, 0.009980792, 0.009479213, -0.0015991806,
                  0.023466289, -0.0047046863, 0.0094474675, -0.037129562, 0.016088631, 0.0012071235, 0.0022063137,
                  0.016964806, -0.014095011, 0.0014483894, -0.005914191, -0.00068808417, -0.012342659,
                  -0.011288707, -0.013282326, 0.0020952043, -0.0012285517, -0.0040570777, -0.006441166,
                  -0.014831508, 0.0064538647, 0.0059967292, -0.002466627, 0.002519007, 0.0033428033, 0.007364961,
                  0.00012926379, 0.023428194, -0.017675906, -0.0065840213, 0.021701239, -0.023212325,
                  -0.015085472, 0.03438675, -0.02587895, 0.02133299, -0.015720382, 0.0021745681, 0.004076125,
                  0.014945791, 0.014209296, -0.007428452, 0.0075109904, -0.003552324, -0.009282391, -0.025612287,
                  0.018120343, 0.011022045, 0.009066521, 0.010380786, -0.0057745106, -0.0035967676, 0.005571339,
                  -0.021523464, -0.028647158, 0.025472606, 0.01636799, 0.033548668, 0.012298215, 0.026920203,
                  0.019504448, -0.0051649963, -0.020012377, 0.0103617385, 0.019961584, 0.025409115, -0.010691891,
                  0.038856518, -0.015047377, -0.025421813, 0.030424908, -0.009079219, 0.046627823, 0.0008007808,
                  0.0015856888, 0.012806144, -0.000780543, 0.0032793123, -0.10768081, -0.022996455, 0.020609193,
                  0.020507608, -0.0062633916, -0.0052475347, 0.009199852, 0.013472799, -0.01438707, 0.0035618476,
                  -0.011206169, -0.018018758, -0.0152251525, -0.013739462, 0.023644064, 0.0085014505, 0.025155151,
                  -0.02869795, -0.0006071331, 0.005187218, -0.00067697326, 0.011441086, -0.004984047,
                  0.0067363996, -0.0043078675, 0.0075236885, -0.009079219, 0.029942377, 0.0072697243,
                  0.0112442635, 0.024164692, -0.009974442, 0.017358452, -0.0041046957, -0.011752192,
                  -0.0005226107, -0.02473611, 0.0021967902, 0.014717224, -0.02699639, 0.012723605, -0.0073141684,
                  -0.0024650397, -0.047516696, 0.006793542, -0.0045332606, 0.00033670093, 0.018615574,
                  0.022920266, -0.007066553, -0.0037554952, 0.025701175, -0.029663015, 0.004622148, 0.04147235,
                  -0.005888794, 0.016558465, -0.00170156, -0.009764923, -0.0065522757, 0.0069078254,
                  -0.0012547417, -0.020253643, 0.008057013, 0.008095108, 0.015898157, -0.011079187, -0.0023269467,
                  0.005101505, -0.015212454, 0.012082346, -0.006406246, -0.016685447, -0.008901444, -0.010044283,
                  -0.038551763, -0.034132786, 0.005577688, -0.00013283516, -0.022552019, 0.0019364768,
                  -0.0101331705, 0.0075109904, -0.0012531545, -0.0006281645, -0.020164756, -0.010272851,
                  -0.0067237015, -0.0074094045, -0.015796572, -0.004336438, 0.01126966, 0.031034421, -0.013510894,
                  -0.016926711, 0.018107645, -0.014412466, -0.0021539337, 0.01743464, -0.023694858, -0.006364977,
                  -0.010044283, -0.04020253, 0.006888778, -0.017815586, -0.0067363996, 0.008850652, -0.010031585,
                  0.016748937, 0.009968094, -0.0082093915, 0.016952109, -0.010729986, 0.012749001, 0.01375216,
                  0.007968126, -0.017091788, -0.008914143, 0.015428323, 0.0051427744, 0.022285355, -0.009276042,
                  0.022221865, 0.030170944, -0.0046253223, -0.00068848097, -0.02040602, 0.021891711, -0.013231534,
                  0.016914014, -0.027478924, -0.010901412, 0.01148553, -0.024558336, 0.0032793123, 0.026031328,
                  -0.014412466, -0.029993169, -0.0040951725, 0.012298215, 0.009656988, 0.0027856694,
                  -0.0065395776, -0.03667243, 0.011072838, -0.023694858, -0.012025204, 0.01495849, -0.016241008,
                  -0.0040412047, 0.01884414, 0.003834859, -0.0082093915, 0.01112998, 0.010488721, -0.01921239,
                  0.015720382, 0.00132855, 0.0059491107, -0.01183473, 0.0050443634, -0.0311868, 0.03585974,
                  -0.00900303, 0.008806207, -0.0092188995, -0.004485642, -0.013688669, -0.016710842, -0.013625178,
                  0.0147045255, -0.02984079, -0.018691763, 0.005168171, 0.01977111, 0.011066489, 0.03918667,
                  -0.017866379, -0.0069713164, -0.02849478, -0.008444308, 0.010907761, 0.013625178, 0.019821903,
                  -0.024380561, 0.010869667, 0.010234756, 0.024698015, -0.016748937, -0.0013515656, 0.0055046733,
                  0.004523737, -0.00471421, -0.013307722, 0.011295057, -0.001543626, 0.0039586667, 0.025320228,
                  -0.0031015375, -0.007853842, 0.017904473, 0.031059818, -0.005491975, 0.004634846, 0.003007888,
                  -0.00723163, -0.012012505, -0.01622831, -0.033828028, -0.042792965, 0.00900303, 0.0074728956,
                  0.018310817, 0.016761634, -0.003990412, 0.022564717, 0.0074728956, 0.012088695, -0.0013999775,
                  -0.0059427614, -0.019047312, 0.026844013, 0.003139632, 0.0121902805, 0.007917333, -0.020444116,
                  0.0060856165, 0.01723147, -0.0040919976, 0.00012192265, 0.0011079187, 0.005196742,
                  -0.0014348975, 0.009371278, -0.016342595, -0.010266501, -0.014552147, 0.0071744877, 0.015910855,
                  0.018793348, -0.025205944, 0.037078768, 0.0044126273, 0.008768113, 0.003990412, -0.007879239,
                  0.005364993, 0.028088437, -0.020126661, -0.006352279, 0.004549133, 0.024418656, 0.007618925,
                  0.005726892, -0.012552179, -0.026183706, -0.0028872553, 0.00040177925, 0.0008182408,
                  -0.028977312, -0.023415497, 0.008831604, 0.018679066, 0.014425165, 0.028113835, -0.013993426,
                  -0.003150743, 0.0019809206, -0.0034793091, 0.012895031, -0.040862836, 0.0025555145,
                  -0.001885684, -0.04934524, -0.008907793, -0.0045681805, -0.021828221, -0.0140823135,
                  -0.015529909, 0.004085649, 0.0026936075, -0.03133918, 0.041091405, -0.017739397, -0.018552084,
                  0.014539449, 0.010431578, -0.015288644, -0.019364769, -0.0027967806]

    def test_should_reply_embeddings_for_specified_input(self, client: OpenAI):
        server = gpt_server(12306)
        server.embeddings.request(input="Hi").response(embeddings=self.embeddings)

        with server:
            response = client.embeddings.create(
                model="text-embedding-ada-002",
                input="Hi",
                encoding_format="float"
            )

            assert response.data[0].embedding[0] == 0.002253932

    def test_should_reply_embeddings_for_specified_api_key(self, client: OpenAI):
        server = gpt_server(12306)
        server.embeddings.request(
            input="Hi", api_key="sk-123456789"
        ).response(
            embeddings=self.embeddings
        )

        with server:
            client = OpenAI(base_url="http://localhost:12306/v1", api_key="sk-123456789")
            response = client.embeddings.create(
                model="text-embedding-ada-002",
                input="Hi",
                encoding_format="float"
            )

            assert response.data[0].embedding[0] == 0.002253932

    def test_should_reply_embeddings_for_specified_model(self, client: OpenAI):
        server = gpt_server(12306)
        server.embeddings.request(
            input="Hi", model="text-embedding-ada-002"
        ).response(
            embeddings=self.embeddings
        )

        with server:
            response = client.embeddings.create(
                model="text-embedding-ada-002",
                input="Hi",
                encoding_format="float"
            )

            assert response.data[0].embedding[0] == 0.002253932

    def test_should_reply_embeddings_for_specified_encoding_format(self, client: OpenAI):
        server = gpt_server(12306)
        server.embeddings.request(input="Hi", encoding_format="float").response(
            embeddings=self.embeddings)

        with server:
            response = client.embeddings.create(
                model="text-embedding-ada-002",
                input="Hi",
                encoding_format="float"
            )

            assert response.data[0].embedding[0] == 0.002253932
